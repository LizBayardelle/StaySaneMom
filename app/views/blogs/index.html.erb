<!-- page-specific content -->
  <% title "Blog | SSM" %>
  <%= content_for :head do %>
    <meta name="description" content="We moms need all the help we can get. Find information about how to keep a clean house, a healthy marriage, balanced kids, and some sanity for mom." />
  <% end %>
<!-- page-specific content -->

<div class="header-frame frame" style="background-image: url(<%= asset_path "best-parenting-blog.jpg" %>)"><div class="image-overlay image-overlay-white"><div class="inner-frame border-neutral"></div></div></div>
<div class="over-frame-text">
  <div class="container text-center">
    <div class="buffer"></div>
    <div class="half-buffer"></div>
    <h1>The Stay Sane Blog</h1>
    <div class="half-buffer"></div>
    <h4>Get the latest tips delivered straight to your inbox.</h4>
    <script async data-uid="229e74784f" src="https://f.convertkit.com/229e74784f/ac0fba8d30.js"></script>
  </div> <!-- container -->
  <div class="over-frame-bottom-row">
    <div class="container text-center">
      <% if current_user && current_user.admin %>
        <div class="half-buffer"></div>
        <%= link_to 'New Blog', new_blog_path, class: "btn btn-outline-secondary" %>
        <div class="buffer"></div>
      <% end %>
    </div> <!-- over frame bottom row -->
  </div> <!-- over-frame-text -->
</div> <!-- over-frame-text -->




<% if current_user && current_user.admin %>
  <div class="bg-neutral"><div class="container">
    <% if @unpublished.count > 0 %>
      <div class="half-buffer"></div>
      <h2>Unpublished Blogs</h2>
      <% @unpublished.each do |blog| %>
        <h5><%= link_to blog.title, blog_path(blog) %></h5>
      <% end %>
      <div class="half-buffer"></div>
    <% end %>
  </div></div>
<% end %>

<div class="container">
  <div class="half-buffer"></div>

  <div class="text-center full-width"><div id="tag_cloud">
    <h2>Looking for a specific topic?</h2>
    <% tag_cloud Blog.tag_counts, %w{s m l} do |tag, css_class| %>
    <%= link_to tag.name, tag_path(tag.name), class: css_class %>
    <% end %>
  </div></div>

  <div class="half-buffer"></div>

  <div class="row">
    <% @blogs.each do |blog| %>
      <%= link_to blog do %>
        <div class="col-lg-6 col-xl-4"><div class="blog-card">
          <% case blog.category %>
          <% when "House" %>
            <div class="house transparent-hover">
              <div class="flag">House</div>
          <% when "Spouse" %>
            <div class="spouse transparent-hover">
              <div class="flag">Spouse</div>
          <% when "Kids" %>
            <div class="kids transparent-hover">
              <div class="flag">Kids</div>
          <% when "Self" %>
            <div class="self transparent-hover">
              <div class="flag">Self</div>
          <% else %>
            <div class="other transparent-hover neutral">
              <div class="flag">General</div>
          <% end %>
              <div class="blog-frame" style="background-image: url(<%= rails_blob_url(blog.image) if blog.image.attached? %>)">
                <% case blog.category %>
                <% when "House" %>
                  <div class="image-overlay-house"></div>
                <% when "Spouse" %>
                  <div class="image-overlay-spouse"></div>
                <% when "Kids" %>
                  <div class="image-overlay-kids"></div>
                <% when "Self" %>
                  <div class="image-overlay-self"></div>
                <% else %>
                  <div class="image-overlay-neutral"></div>
                <% end %>
              </div>
              <div class="blog-text">
                <h2><%= blog.title %></h2>
                <p class="blog-teaser"><%= blog.teaser %><span class="color-neutral" style="padding-left: 5px"><%= blog.cta_read_more + "..." %></span></p>
                <p class="published-on">
                  <strong>Categories:
                    <%= raw blog.tag_list.map { |t| link_to t, tag_path(t) }.join(', ') %>
                  </strong><br />
                  <small>
                  <%= pluralize(blog.comments.count, "Comment") %>, Published on <%= blog.published_on.in_time_zone("America/Los_Angeles").strftime("%B %d, %Y") %> in <%= blog.category %>
                  <% if current_user && current_user.admin %>
                       | <%= link_to 'Edit', edit_blog_path(blog) %> |
                      <%= link_to 'Destroy', blog, method: :delete, data: { confirm: 'Are you sure?' } %>
                  <% else %>
                       | <%= link_to "Home", root_path %>
                  <% end %>
                </small></p>
              </div> <!-- blog-text -->
            </div> <!-- end case div -->
        </div></div> <!-- blog card/col -->
      <% end %>
    <% end %>
  </div> <!-- row -->

  <div class="text-center">
    <% { is_active: true } %>
    <h5 class="text-center pagination"><%= will_paginate @blogs %></h5>
  </div>

</div> <!-- page container -->

<script>
  $(function() {
    $('.blog-text').matchHeight();
    $('.blog-teaser').matchHeight();
  });
</script>
